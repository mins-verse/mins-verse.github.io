<div class="news">
  {% if site.news != blank -%}
    {%- assign news = site.news | reverse -%}
    {%- assign news_size = news | size -%}

    <div class="table-responsive">
      <table class="table table-sm table-borderless">
        <!-- 처음 5개 -->
        {% for item in news limit: 5 %}
          <tr>
            <th scope="row" style="width:10%">{{ item.date | date: "%b %Y" }}</th>
            <td>
              {% if item.inline -%}
                {{ item.content | remove: '<p>' | remove: '</p>' | emojify }}
              {%- else -%}
                <a class="news-title" href="{{ item.url | relative_url }}">{{ item.title }}</a>
              {%- endif %}
            </td>
          </tr>
        {%- endfor %}
      </table>

      {% if news_size > 5 %}
        <!-- 나머지 (처음엔 숨김) -->
        <div id="news-more-panel" style="display:none;">
          <table class="table table-sm table-borderless" style="margin-top: 0px;">
            {% for item in news offset: 5 %}
              <tr>
                <th scope="row" style="width:10%">{{ item.date | date: "%b %Y" }}</th>
                <td>
                  {% if item.inline -%}
                    {{ item.content | remove: '<p>' | remove: '</p>' | emojify }}
                  {%- else -%}
                    <a class="news-title" href="{{ item.url | relative_url }}">{{ item.title }}</a>
                  {%- endif %}
                </td>
              </tr>
            {%- endfor %}
          </table>
        </div>

        <!-- 버튼은 “항상 맨 아래”에 위치 -->
        <span id="news-more-btn" style="cursor: pointer;">  More</span>
      {% endif %}
    </div>

  {%- else -%}
    <p>No news so far...</p>
  {%- endif %}
</div>


<script>
document.addEventListener("DOMContentLoaded", () => {
  const panel = document.getElementById("news-more-panel");
  const btn = document.getElementById("news-more-btn");
  if (!panel || !btn) return;

  let open = false;

  btn.addEventListener("click", () => {
    open = !open;
    panel.style.display = open ? "block" : "none";
    btn.textContent = open ? "  Less" : "  More";

    if (open) {
      // 펼친 뒤 버튼(=맨 아래)에 시선이 오도록 스크롤
      requestAnimationFrame(() => {
        btn.scrollIntoView({ behavior: "smooth", block: "end" });
      });
    }
  });
});
</script>
